name: CancerMine
version: 0.1
url: https://github.com/jakelever/cancermine
resources:
   full:
      - BIOWORDLISTS
      - PUBMED:
         format: bioc
      - PMCOA:
         format: bioc
      - PMCAMC:
         format: bioc
   test:
      - BIOWORDLISTS_TEST:
         rename: BIOWORDLISTS
      - PUBMED_CUSTOM:
         pmids: 24427302
         format: bioc
         rename: PUBMED
      - PMCOA_CUSTOM:
         pmcids: 3960274
         format: bioc
         rename: PMCOA
run:
   - sh buildModelsIfNeeded.sh
   - sh pickleWordlistIfNeeded.sh {IN:BIOWORDLISTS}
   - python parseAndFindEntities.py --biocFile {IN:PUBMED/%} --filterTerms filterTerms.txt --wordlistPickle cancermine_terms.pickle --outSentencesFilename {OUT:sentenceData/%.json}
   - python parseAndFindEntities.py --biocFile {IN:PMCOA/%} --filterTerms filterTerms.txt --wordlistPickle cancermine_terms.pickle --outSentencesFilename {OUT:sentenceData/%.json}
   - python parseAndFindEntities.py --biocFile {IN:PMCAMC/%} --filterTerms filterTerms.txt --wordlistPickle cancermine_terms.pickle --outSentencesFilename {OUT:sentenceData/%.json}
   - python applyModelsToSentences.py --models models/cancermine.driver.model,models/cancermine.oncogene.model,models/cancermine.tumorsuppressor.model --filterTerms filterTerms.txt --wordlistPickle cancermine_terms.pickle --genes {IN:BIOWORDLISTS/terms_genes.tsv} --cancerTypes {IN:BIOWORDLISTS/terms_cancers.tsv} --sentenceFile {IN:sentenceData/%.json} --outData {OUT:out/%.tsv}
   - find {IN:out} -type f | xargs cat | sort -u > {OUT:uniq.tsv}
   - cat header.tsv {IN:uniq.tsv} > {OUT:cancermine_all.tsv}
   - python filterCancermine.py --inCancermine {IN:cancermine_all.tsv} --outFiltered {OUT:cancermine_conservative.tsv}
output: cancermine_conservative.tsv

